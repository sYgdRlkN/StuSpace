# 📚 校园学习空间占用 & 行为分析系统（完整版思路）

> 一句话定义（你以后答辩可以直接用）：
> **“本系统通过数据库对校园学习空间使用行为进行记录、分析与统计，为学生和管理者提供决策支持。”**

---

## 一、这个系统到底“新”在哪？

普通系统：

> ❌ 自习室预约 + 查询

你的系统：

> ✅ **行为记录 + 数据分析 + 管理决策**

核心升级点有三层：

1️⃣ **不只是预约，而是“实际使用”**
2️⃣ **不只是记录，而是“行为模式”**
3️⃣ **不只是展示，而是“分析结果”**

---

## 二、系统角色设计（老师最爱看）

### 👤 学生

* 查看学习空间空闲情况
* 预约学习空间
* 签到 / 签退
* 查看个人学习行为分析报告

### 👨‍🏫 管理员（或教务人员）

* 查看空间利用率
* 发现异常行为（爽约、长时间占用）
* 优化空间开放策略

👉 **多角色 = 天然多表 + 权限控制**

---

## 三、核心功能模块拆解

### 🔹 1. 学习空间管理模块

管理校园中的各种学习空间：

* 自习室
* 普通教室
* 实验室
* 研讨室

字段示例：

* 空间编号
* 类型
* 容量
* 开放时间

📌 数据库点：

* 基础表设计
* 类型枚举（CHECK / 外键）

---

### 🔹 2. 预约 & 使用行为记录模块（重点）

这一步是你整个系统的灵魂。

#### 行为流程

1. 学生预约空间
2. 到场 → 签到
3. 离开 → 签退
4. 系统记录实际使用时长

📌 数据库体现：

* `reservation` 表（预约）
* `usage_record` 表（实际使用）
* **预约 ≠ 使用（这是亮点）**

---

### 🔹 3. 异常行为识别模块（老师会加分）

定义几类异常：

* ❌ 预约未签到（爽约）
* ❌ 超时占用
* ❌ 高频短时占用（占坑）

📌 实现方式：

* **触发器（Trigger）**

  * 到预约结束仍未签到 → 自动插入异常记录
* **定期统计查询**

  * 连续 N 天爽约的学生

---

### 🔹 4. 学习行为分析模块（质变点）

这是你从「系统」升级到「分析平台」的地方。

#### 可以做哪些分析？

**① 空间维度**

* 各空间利用率
* 高峰时间段
* 闲置空间排行

**② 学生维度**

* 学生平均学习时长
* 学习时间分布（早/晚）
* 稳定学习型 vs 碎片化学习型

📌 数据库点：

* GROUP BY + HAVING
* 视图（VIEW）
* 复杂聚合查询

---

## 四、数据库设计（老师重点检查）

### 🧱 核心表结构（简化版）

```text
Student(
  student_id PK,
  name,
  major,
  grade
)

StudySpace(
  space_id PK,
  type,
  capacity,
  open_time,
  close_time
)

Reservation(
  reservation_id PK,
  student_id FK,
  space_id FK,
  reserve_start,
  reserve_end,
  status
)

UsageRecord(
  usage_id PK,
  reservation_id FK,
  check_in_time,
  check_out_time,
  actual_duration
)

AbnormalBehavior(
  abnormal_id PK,
  student_id FK,
  space_id FK,
  type,
  record_time
)
```

👉 你可以明确在报告里写：

> “预约记录与实际使用记录分离，便于行为分析。”

老师一看就知道你是**有设计意识的**。

---

## 五、必杀数据库技术点（直接点名）

### 🔥 1️⃣ 触发器（重点）

**示例：爽约检测**

* 预约结束时间到
* 还没有对应签到记录
* 自动插入异常行为表

这句话在答辩时说出来，老师一般都会点头。

---

### 🔥 2️⃣ 复杂 SQL 查询（一定要准备）

比如：

* 查询 **连续 3 天预约未签到的学生**
* 查询 **某空间在 18:00–22:00 的平均使用率**
* 查询 **学习时长排名前 10% 的学生**

这些是老师最容易现场问的。

---

### 🔥 3️⃣ 视图（VIEW）

* `StudentStudySummary`
* `SpaceUsageStatistics`

👉 你可以说：

> “通过视图简化复杂查询，提高系统可维护性。”

---

## 六、答辩时的“加分话术”

你可以用这些句式（真的很好用）：

* “我们关注的不只是业务流程，而是**行为数据的沉淀**。”
* “系统通过数据库触发器实现了部分**自动化管理逻辑**。”
* “这些分析结果可以为学校**调整空间开放策略**提供依据。”

---

## 七、如果你愿意，我可以直接帮你下一步

你现在已经有一个**90 分起步的选题**了。

接下来我可以继续帮你：

1️⃣ 画 **ER 图（直接给你结构）**
2️⃣ 设计 **3–5 个老师最爱问的 SQL 查询**
3️⃣ 给你一份 **开题报告模板（直接能交）**
4️⃣ 按你用的数据库（MySQL / PostgreSQL）写示例 SQL

你先告诉我一句就行👇
👉 **你们这门课要求用什么数据库？**
👉 **是个人作业还是小组作业？**